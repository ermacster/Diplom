bastion:
  hosts:
    bastion01:
      ansible_host: "{{ lookup('file', '/home/ermac/Diplom/Diplom/ansible/bastion_external_ip.txt') }}"
      ansible_user: ermac
      vars:
        ansible_ssh_common_args: '-o StrictHostKeyChecking=no'

all:
  vars:
    ansible_ssh_common_args: >-
     -o StrictHostKeyChecking=no
     -o ProxyCommand="ssh -W %h:%p -q ermac@{{ lookup('file', '/home/ermac/Diplom/Diplom/ansible/bastion_external_ip.txt') }}"
    ansible_ssh_user: ermac
    ansible_ssh_private_key_file: /home/ermac/.ssh/id_rsa
    ansible_user: ermac
  children:
    web:
  #vars:
    #ansible_ssh_common_args: '-o ProxyJump=%(bastion01); StrictHostKeyChecking=no'
    
        
web:
  hosts:
    vm-web-a:
      ansible_host: vm-web-a.ru-central1.internal      
    vm-web-b:
      ansible_host: vm-web-b.ru-central1.internal     
  

       